!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("notation",[],t):"object"==typeof exports?exports.notation=t():e.notation=t()}(this,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}function o(e){var t=c();return function(){var r,o=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}(this,r)}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)},a(e)}function u(e,t,n){return u=c()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&s(o,n.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}e.r(t),e.d(t,{Notation:()=>te});var f=Object.setPrototypeOf,p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,n,a,u=o(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e=u.call(this,t),f(i(e),c.prototype),Object.defineProperty(i(e),"name",{enumerable:!1,writable:!1,value:"NotationError"}),Object.defineProperty(i(e),"message",{enumerable:!1,writable:!0,value:t}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(i(e),c):Object.defineProperty(i(e),"stack",{enumerable:!1,writable:!1,value:new Error(t).stack}),e}return t=c,n&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}(a(Error)),v=Object.prototype,h="function"==typeof Symbol?Symbol.prototype.valueOf:null,y=/^[a-z$_][a-z$_\d]*$/i,g=/^\[(\d+)\]$/,b=/^\[(?:'(.*)'|"(.*)"|`(.*)`)\]$/,d=/^(?!!)(.+?)(\.\*|\[\*\])+$/,m=/\w*$/,w={re:{VAR:y,ARRAY_NOTE:g,ARRAY_GLOB_NOTE:/^\[(\d+|\*)\]$/,OBJECT_BRACKETS:b,WILDCARD:/^(\[\*\]|\*)$/,WILDCARDS:/(\*|\[\*\])(?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/,NON_NEG_WILDCARD_TRAIL:d,NEGATE_ALL:/^!(\*|\[\*\])$/},type:function(e){return v.toString.call(e).match(/\s(\w+)/i)[1].toLowerCase()},isCollection:function(e){var t=w.type(e);return"object"===t||"array"===t},isset:function(e){return null!=e},ensureArray:function(e){return"array"===w.type(e)?e:null==e?[]:[e]},hasOwn:function(e,t,n){return!!e&&("array"===(n||w.type(e))||"string"!=typeof t?"number"==typeof t&&(t>=0&&t<e.length):t&&v.hasOwnProperty.call(e,t))},cloneDeep:function(e){switch(w.type(e)){case"date":return new Date(e.valueOf());case"regexp":var t=m.exec(e).toString(),n=new e.constructor(e.source,t);return n.lastIndex=e.lastIndex,n;case"symbol":return h?Object(h.call(e)):e;case"array":return e.map(w.cloneDeep);case"object":var r={};return Object.keys(e).forEach((function(t){r[t]=w.cloneDeep(e[t])})),r;default:return e}},each:function(e,t,n){for(var r=e.length,o=-1;++o<r;)if(!1===t.apply(n,[e[o],o,e]))return},eachRight:function(e,t,n){for(var r=e.length;r--;)if(!1===t.apply(n,[e[r],r,e]))return},eachProp:function(e,t,n){for(var r=Object.keys(e),o=-1;++o<r.length;){var i=r[o];if(!1===t.apply(n,[e[i],i,e]))return}},eachItem:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"array"===w.type(e)?r?w.eachRight(e,t,n):w.each(e,t,n):w.eachProp(e,t,n)},pregQuote:function(e){return String(e).replace(/[.\\+*?[^\]$(){}=!<>|:-]/g,"\\$&")},stringOrArrayOf:function(e,t){return"string"==typeof t&&(e===t||"array"===w.type(e)&&1===e.length&&e[0]===t)},hasSingleItemOf:function(e,t){return 1===e.length&&(2!==arguments.length||e[0]===t)},removeTrailingWildcards:function(e){return e.replace(d,"$1")},normalizeNote:function(e){if(y.test(e))return e;var t=e.match(g);if(t)return parseInt(t[1],10);if(t=e.match(b))return t[1]||t[2]||t[3];throw new p("Invalid note: '".concat(e,"'"))},joinNotes:function(e){var t=e.length-1;return e.map((function(n,r){if(!n)return"";var o=t>=r+1?e[r+1]:null;return n+(o?"["===o[0]?"":".":"")})).join("")},getNewNotation:function(e,t){var n,r="Invalid new notation: '".concat(e,"'");if("string"==typeof e){if(!(n=e.trim()))throw new p(r);return n}if(t&&!w.isset(e))return t;throw new p(r)}};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}var P=/(\[(\d+|\*|".*"|'.*')\]|[a-z$_][a-z$_\d]*|\*)/gi,R=new RegExp("^!?(\\*|[a-z$_][a-z$_\\d]*|\\[(\\d+|\\*|\".*\"|'.*')\\])(\\[(\\d+|\\*|\".*\"|'.*')\\]|\\.[a-z$_][a-z$_\\d]*|\\.\\*)*$","i"),A=w.re,D="Invalid glob notation: ",E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=e._inspect(t),r=e.split(n.absGlob);this._=N(N({},n),{},{notes:r,parent:void 0,regexp:void 0})}var t,n,r;return t=e,n=[{key:"glob",get:function(){return this._.glob}},{key:"absGlob",get:function(){return this._.absGlob}},{key:"isNegated",get:function(){return this._.isNegated}},{key:"regexp",get:function(){return this._.regexp=this._.regexp||e.toRegExp(this.absGlob),this._.regexp}},{key:"notes",get:function(){return this._.notes}},{key:"levels",get:function(){return this._.notes}},{key:"first",get:function(){return this.notes[0]}},{key:"last",get:function(){return this.notes[this.notes.length-1]}},{key:"parent",get:function(){return void 0===this._.parent&&(this._.parent=this.notes.length>1?this.absGlob.slice(0,-this.last.length).replace(/\.$/,""):null),this._.parent}},{key:"test",value:function(t){if(!te.isValid(t))throw new p("Invalid notation: '".concat(t,"'"));return e._covers(this,t)}},{key:"covers",value:function(t){return e._covers(this,t)}},{key:"intersect",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e._intersect(this.glob,t,n)}}],r=[{key:"create",value:function(t){return new e(t)}},{key:"isValid",value:function(e){return"string"==typeof e&&R.test(e)}},{key:"hasMagic",value:function(t){return e.isValid(t)&&(A.WILDCARDS.test(t)||"!"===t[0])}},{key:"toRegExp",value:function(t){if(!e.isValid(t))throw new p("".concat(D," '").concat(t,"'"));var n=0===t.indexOf("!")?t.slice(1):t;return n=w.pregQuote(n).replace(/\\\[\\\*\\\](?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/g,"\\[\\d+\\]").replace(/\\\*(?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/g,"[a-z$_][a-z$_\\d]*").replace(/\\\?/g,"."),new RegExp("^"+n+"(?:[\\[\\.].+|$)","i")}},{key:"_covers",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="string"==typeof t?new e(t):t,i="string"==typeof n?new e(n):n,a=o.notes||e.split(o.absGlob),u=i.notes||e.split(i.absGlob);if(!r&&o.isNegated&&a.length>u.length)return!1;for(var c=!0,s=r?I:x,l=0;l<a.length;l++)if(!s(a[l],u[l])){c=!1;break}return c}},{key:"_intersect",value:function(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.split(t,!0),a=e.split(n,!0);r=o?"!"===t[0]||"!"===n[0]?"!":"":"!"===t[0]&&"!"===n[0]||i.length>a.length&&"!"===t[0]||a.length>i.length&&"!"===n[0]?"!":"";for(var u,c,s=Math.max(i.length,a.length),l=[],f=0;f<s;f++)if((u=i[f])===(c=a[f]))l.push(u);else if(u&&A.WILDCARD.test(u))c?l.push(c):l.push(u);else if(c&&A.WILDCARD.test(c))u?l.push(u):l.push(c);else if(u&&!c)l.push(u);else{if(u||!c){l=[];break}l.push(c)}return l.length>0?r+w.joinNotes(l):null}},{key:"_inspect",value:function(t){var n=t.trim();if(!e.isValid(n))throw new p("".concat(D," '").concat(t,"'"));var r="!"===n[0];r||(n=w.removeTrailingWildcards(n));var o=r?n.slice(1):n;return{glob:n,absGlob:o,isNegated:r,isArrayGlob:/^\[[^'"]/.test(o)}}},{key:"split",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.isValid(t))throw new p("".concat(D," '").concat(t,"'"));return("!"!==t[0]&&n?w.removeTrailingWildcards(t):t).replace(/^!/,"").match(P)}},{key:"compare",value:function(t,n){if(t===n||A.WILDCARD.test(t)&&A.WILDCARD.test(n))return 0;var r=new e(t),o=new e(n);if(r.notes.length===o.notes.length){var i=T(r,o);if(0!==i)return i;var a=(r.absGlob.match(A.WILDCARDS)||[]).length,u=(o.absGlob.match(A.WILDCARDS)||[]).length;return a===u?!r.isNegated&&o.isNegated?-1:r.isNegated&&!o.isNegated?1:r.absGlob<o.absGlob?-1:r.absGlob>o.absGlob?1:0:a>u?-1:1}return r.notes.length<o.notes.length?-1:1}},{key:"sort",value:function(t){return t.sort(e.compare)}},{key:"normalize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e._inspect,o=e._covers,i=e._intersect,a=w.ensureArray(t);if(0===a.length)return[];var u=a.concat().sort(n?C:L).map(r);if(1===u.length){var c=u[0];return c.isNegated?[]:[c.glob]}var s=!1,l=[],f={},v={};function h(e,t){var r=i(e,t,n);if(r){var o,c=!n&&a.indexOf("!"===(o=r)[0]?o.slice(1):"!"+o)>=0;u.indexOf(r)>=0||c||(v[r]=r)}}return w.eachRight(u,(function(e,t){if(A.NEGATE_ALL.test(e.glob)&&(s=!0,n))return!1;var r=!1,i=!1,c=!1,v=!1,y=!1,g=!1,b=!1,d=!1;w.eachRight(u,(function(s,l){if(t!==l){if(e.isArrayGlob!==s.isArrayGlob)throw new p("Integrity failed. Cannot have both object and array notations for root level: ".concat(JSON.stringify(a)));if(e.glob===s.glob)return u.splice(t,1),r=!0,!1;if(!e.isNegated&&function(e,t){return e.isNegated!==t.isNegated&&e.absGlob===t.absGlob}(e,s))return f[e.glob]=!0,i=!0,!1;if(!f[s.glob]){var m=o(e,s),w=!m&&o(s,e);if(e.isNegated)if(s.isNegated){if(w)return y=!0,f[e.glob]=!0,!1}else m&&(c=!0),w&&(v=!0),m||w||h(e.glob,s.glob);else if(s.isNegated){if(w)return b=!0,n?(f[e.glob]=!0,!1):void 0;m||w||h(e.glob,s.glob)}else if(m&&(g=m),w&&(d=!0,n))return!1}}}));var m=n?(c||v)&&!1===y:v&&!1===y,O=n?(g||!1===d)&&!1===b:b||!1===d;!1===r&&!1===i&&(e.isNegated?m:O)?l.push(e.glob):f[e.glob]=!0})),n&&s?[]:(v=Object.keys(v)).length>0?(l=l.concat(v),e.normalize(l,n)):e.sort(l)}},{key:"_compareUnion",value:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e._covers,a=e._inspect,u=e._intersect;return w.eachRight(t,(function(e){if(!(o.indexOf(e)>=0)){var t=a(e);if(A.WILDCARD.test(t.absGlob))o.push(t.glob);else{var c=!1,s=!1,l=!1,f=!1,p=!1,v=!1,h=[];w.eachRight(n,(function(n){e===n&&(s=!0);var y=a(n);if(c=!i(y,t)){if(t.isNegated&&y.isNegated){var g=u(t.glob,y.glob,r);g&&-1===o.indexOf(g)&&h.push(g)}}else t.isNegated?y.isNegated?l=!s:f=!0:y.isNegated?v=!0:p=!s}));var y=t.isNegated?!f||l:!p||v;s||y||c&&!t.isNegated?o.push(t.glob):t.isNegated&&f&&!l&&h.length>0&&(o=o.concat(h))}}})),o}},{key:"union",value:function(t,n,r){var o=e.normalize,i=e._compareUnion,a=o(t,r),u=o(n,r);if(0===a.length)return u;if(0===u.length)return a;var c=i(a,u,r);return c=i(u,a,r,c),o(c,r)}}],n&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e,t){if(!e||!t)return!1;var n=A.ARRAY_GLOB_NOTE.test(t);return"*"===e?!n:"[*]"===e?n:!A.WILDCARD.test(t)&&w.normalizeNote(e)===w.normalizeNote(t)}function I(e,t){return!e||!t||(x(e,t)||x(t,e))}function $(e){return parseInt(e.replace(/[[\]]/,""),10)}function G(e,t){return $(e)>$(t)?-1:1}function T(e,t){var n=A.ARRAY_GLOB_NOTE;return e.isNegated&&t.isNegated&&e.notes.length===t.notes.length&&n.test(e.last)&&n.test(t.last)&&e.last!==t.last?"[*]"===e.last?1:"[*]"===t.last?-1:e.parent&&t.parent?(0,E._covers)(e.parent,t.parent,!0)?G(e.last,t.last):0:G(e.last,t.last):0}var z=/^\s*!/;function C(e,t){var n=z.test(e),r=z.test(t);return n&&r?e.length>=t.length?1:-1:n?-1:r?1:0}function L(e,t){var n=z.test(e),r=z.test(t);return n&&r?e.length>=t.length?1:-1:n?1:r?-1:0}function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return(t=Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===W(t)?t:String(t)}var J="Invalid source. Expected a data object or array.",Q="Invalid destination. Expected a data object or array.",U="Invalid notation: ",K="Invalid notations object. ",q="Implied index does not exist: ",H="Implied property does not exist: ",X=/(\[(\d+|".*"|'.*'|`.*`)\]|[a-z$_][a-z$_\d]*)/gi,Z=new RegExp("^([a-z$_][a-z$_\\d]*|\\[(\\d+|\".*\"|'.*')\\])(\\[(\\d+|\".*\"|'.*')\\]|\\.[a-z$_][a-z$_\\d]*)*$","i"),ee=Object.freeze({strict:!1,preserveIndices:!1}),te=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),0===arguments.length)this._source={};else{if(!w.isCollection(t))throw new p(J);this._source=t}this._isArray="array"===w.type(this._source),this.options=n}var t,n,r;return t=e,n=[{key:"options",get:function(){return this._options},set:function(e){this._options=B(B(B({},ee),this._options||{}),e||{})}},{key:"value",get:function(){return this._source}},{key:"each",value:function(e){return ne(this._source,e),this}},{key:"eachValue",value:function(t,n){var r=this._source;return e.eachNote(t,(function(e,t,o,i){if(r=w.hasOwn(r,t)?r[t]:void 0,!1===n(r,e,t,o,i))return!1})),this}},{key:"getNotations",value:function(){var e=[];return this.each((function(t){e.push(t)})),e}},{key:"clone",value:function(){return this._source=w.cloneDeep(this._source),this}},{key:"flatten",value:function(){var e={};return this.each((function(t,n,r){e[t]=r})),this._source=e,this}},{key:"expand",value:function(){return this._source=e.create({}).merge(this._source).value,this}},{key:"aggregate",value:function(){return this.expand()}},{key:"inspectGet",value:function(t){var n,r=this._source,o={has:!1,value:void 0};return e.eachNote(t,(function(e,i,a){var u=w.normalizeNote(i);if(!w.hasOwn(r,u))return o={notation:t,has:!1,type:"undefined",level:a+1,lastNote:i,lastNoteNormalized:u},!1;r=r[u],n=r,o={notation:t,has:!0,value:r,type:w.type(r),level:a+1,lastNote:i,lastNoteNormalized:u}})),(void 0===n||o.has&&n===o.value)&&(n=this._source),o.parentIsArray="array"===w.type(n),o}},{key:"inspectRemove",value:function(t){if(!t)throw new Error(U+"'".concat(t,"'"));var n,r,o=e.parent(t),i=o?this.get(o,null):this._source,a="array"===w.type(i),u=e.split(t),c=u[u.length-1],s=w.normalizeNote(c);return w.hasOwn(i,s)?(n={notation:t,has:!0,value:r=i[s],type:w.type(r),level:u.length,lastNote:c,lastNoteNormalized:s,parentIsArray:a},!this.options.preserveIndices&&a?i.splice(s,1):delete i[s]):n={notation:t,has:!1,type:"undefined",level:u.length,lastNote:c,lastNoteNormalized:s,parentIsArray:a},n}},{key:"has",value:function(e){return this.inspectGet(e).has}},{key:"hasDefined",value:function(e){return void 0!==this.inspectGet(e).value}},{key:"get",value:function(e,t){var n=this.inspectGet(e);if(this.options.strict&&arguments.length<2&&!n.has){var r=n.parentIsArray?q:H;throw new p(r+"'".concat(e,"'"))}return n.has?n.value:t}},{key:"set",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"overwrite";if(!t.trim())throw new p(U+"'".concat(t,"'"));!0===r&&(r="overwrite");var o,i,a,u,c,s=this._source,l="Cannot set value by inserting at index, on an object";return e.eachNote(t,(function(t,f,v,h){if(o=v===h.length-1,i=a||w.normalizeNote(f),a=o?null:w.normalizeNote(h[v+1]),"array"===(c=w.type(s))&&"number"!=typeof i){var y=e.parent(t)||"source";throw new p("Cannot set string key '".concat(f,"' on array ").concat(y))}if(w.hasOwn(s,i,c))if(o){if("overwrite"===r)s[i]=n;else if("insert"===r){if("array"!==c)throw new p(l);s.splice(i,0,n)}}else s=s[i];else{if(o&&"array"!==c&&"insert"===r)throw new p(l);u="number"==typeof a,s[i]=o?n:u?[]:{},s=s[i]}})),this}},{key:"merge",value:function(e){var t,n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("object"!==w.type(e))throw new p(K+"Expected an object.");return w.each(Object.keys(e),(function(o){t=e[o],n.set(o,t,r)})),this}},{key:"separate",value:function(t){var n=this;if("array"!==w.type(t))throw new p(K+"Expected an array.");var r=new e({});return w.each(t,(function(e){var t=n.inspectRemove(e);r.set(e,t.value)})),this._source=r._source,this}},{key:"filter",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=w.re,i=E.normalize(t,r.restrictive),a=i.length,u=this._isArray?[]:{};if(0===a||1===a&&(!i[0]||o.NEGATE_ALL.test(i[0])))return this._source=u,this;var c,s=w.cloneDeep(this.value),l=o.WILDCARD.test(i[0]);return 1===a&&l?(this._source=s,this):(l?(c=new e(s),i.shift()):c=new e(u),w.each(i,(function(t){var r,i,a,u=new E(t),s=u.glob,l=u.absGlob,f=u.isNegated,v=u.levels;".*"===l.slice(-2)?(r=l.slice(0,-2),f&&(i={}),a="object"):"[*]"===l.slice(-3)?(r=l.slice(0,-3),f&&(i=[]),a="array"):r=l;var h="Integrity failed for glob '".concat(s,"'. Cannot set empty ").concat(a," for '").concat(r,"' which has a type of ");if(!1===o.WILDCARDS.test(r)){if(f){var y=c.inspectRemove(r);if(i){var g=y.type,b=h+"'".concat(g,"'."),d=w.isset(y.value);if(d&&g!==a||!d&&n.options.strict)throw new p(b);var m=y.parentIsArray?"insert":"overwrite";c.set(r,i,m)}}else{var O=n.inspectGet(r);O.has&&c.set(r,O.value,"overwrite")}return!0}ne(n._source,(function(t,o,s){if(!E.create(r).covers(t))return!0;if(n.options.strict&&i){var l=w.type(s);if(l!==a&&e.split(t).length===v.length-1)throw new p(h+"'".concat(l,"'."))}e.eachNote(t,(function(t){if(u.test(t)){var n=e.split(t).length;if(f&&v.length<=n)return c.remove(t),!1;c.set(t,s,"overwrite")}}))}),!0)})),this._source=c.value,this)}},{key:"remove",value:function(e){var t=this.inspectRemove(e);if(this.options.strict&&!t.has){var n=t.parentIsArray?q:H;throw new p(n+"'".concat(e,"'"))}return this}},{key:"delete",value:function(e){return this.remove(e),this}},{key:"copyTo",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!w.isCollection(t))throw new p(Q);var i=this.inspectGet(n);if(i.has){var a=w.getNewNotation(r,n);e.create(t).set(a,i.value,o)}return this}},{key:"copyFrom",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!w.isCollection(t))throw new p(Q);var i=e.create(t).inspectGet(n);if(i.has){var a=w.getNewNotation(r,n);this.set(a,i.value,o)}return this}},{key:"moveTo",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!w.isCollection(t))throw new p(Q);var i=this.inspectRemove(n);if(i.has){var a=w.getNewNotation(r,n);e.create(t).set(a,i.value,o)}return this}},{key:"moveFrom",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!w.isCollection(t))throw new p(Q);var i=e.create(t).inspectRemove(n);if(i.has){var a=w.getNewNotation(r,n);this.set(a,i.value,o)}return this}},{key:"rename",value:function(e,t,n){return this.moveTo(this._source,e,t,n)}},{key:"renote",value:function(e,t,n){return this.rename(e,t,n)}},{key:"extract",value:function(e,t){var n={};return this.copyTo(n,e,t),n}},{key:"copyToNew",value:function(e,t){return this.extract(e,t)}},{key:"extrude",value:function(e,t){var n={};return this.moveTo(n,e,t),n}},{key:"moveToNew",value:function(e,t){return this.extrude(e,t)}}],r=[{key:"create",value:function(t,n){return 0===arguments.length?new e({}):new e(t,n)}},{key:"isValid",value:function(e){return"string"==typeof e&&Z.test(e)}},{key:"split",value:function(t){if(!e.isValid(t))throw new p(U+"'".concat(t,"'"));return t.match(X)}},{key:"join",value:function(e){return w.joinNotes(e)}},{key:"countNotes",value:function(t){return e.split(t).length}},{key:"countLevels",value:function(t){return e.countNotes(t)}},{key:"first",value:function(t){return e.split(t)[0]}},{key:"last",value:function(t){var n=e.split(t);return n[n.length-1]}},{key:"parent",value:function(t){var n=e.last(t);return t.slice(0,-n.length).replace(/\.$/,"")||null}},{key:"eachNote",value:function(t,n){var r=e.split(t),o=[];w.each(r,(function(t,i){if(o.push(t),!1===n(e.join(o),t,i,r))return!1}),e)}},{key:"eachLevel",value:function(t,n){e.eachNote(t,n)}}],n&&F(t.prototype,n),r&&F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:null)||e;w.eachItem(e,(function(e,a){var u="number"==typeof a?"[".concat(a,"]"):a,c=te.join([o,u]),s=w.isCollection(e);if((!s||r)&&!1===t(c,u,e,i))return!1;s&&ne(e,t,n,r,c,i)}),null,n)}return te.Error=p,te.Glob=E,te.utils=w,t})()));
//# sourceMappingURL=notation.min.js.map